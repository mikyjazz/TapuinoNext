# This is a basic workflow to help you get started with Actions

name: TapuinoCI

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        
    # Make the local_config.h file!
      - name: Add config-user.h
        uses: DamianReeves/write-file-action@v1.0
        with:
          path: ./include/config-user.h
          contents: "#pragma once\n#define I2C_DISP_ADDR 0x27\n#define I2C_DISP_TYPE I2C_DISP_TYPE_HD44780"
          write-mode: overwrite 
          
      - name: PlatformIO Run
        uses: karniv00l/platformio-run-action@0.1.0
        with:
#          environments: "teensy35,teensy36,teensy41"
#          targets: "teensy35,teensy36,teensy41"
#          project-dir: "./some_dir"
#          project-conf: "./some_dir/custom.ini"
          jobs: 6
          silent: false
          verbose: true
          disable-auto-clean: false
